#!/usr/bin/env node

var program = require('commander');
var DiscussionFetcher = require('../lib/discussion_fetcher').DiscussionFetcher;

program
  .version('0.0.1')
  .option('-n, --sitename <s>', 'Tender site name')
  .option('-k, --apikey <s>', 'Tender api key')
  .option('-s, --state [new]', 'Discussion state, can be new, open or pending')
  .parse(process.argv);

var opts = {
  site   : program.sitename,
  apiKey : program.apikey,
  state  : program.state
};

var fetcher = new DiscussionFetcher(opts);
fetcher.fetch(function(err, discussions) {
  if (err) {
    throw err;
  }

  console.log(discussions);
});
