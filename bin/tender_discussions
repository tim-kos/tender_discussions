#!/usr/bin/env node

var program = require('commander');
var DiscussionFetcher = require('../lib/discussion_fetcher').DiscussionFetcher;

program
  .version('0.0.1')
  .option('-s, --site <s>', 'Tender site name')
  .option('-k, --apikey <s>', 'Tender api key')
  .parse(process.argv);

var opts = {
  site   : program.site,
  apiKey : program.apikey,
  state  : 'new' // the discussion state, can be "new", "open" or "pending"
};

var fetcher = new DiscussionFetcher(opts);
fetcher.fetch(function(err, discussions) {
  if (err) {
    throw err;
  }

  console.log(discussions);
});
